# ğŸ“š Project 07: Social Auth Hub - React/Next.js ì¸ì¦ ì‹œìŠ¤í…œ ì™„ì „ ê°€ì´ë“œ

> **êµìœ¡ ì‹œë¦¬ì¦ˆ 7/10** - React/Next.js ê²½í—˜ì´ ì—†ëŠ” ê°œë°œìë¥¼ ìœ„í•œ ì™„ì „í•œ ì†Œì…œ ì¸ì¦ ì‹œìŠ¤í…œ í•™ìŠµ ê°€ì´ë“œ

---

## ğŸ“‹ ëª©ì°¨

- [ğŸ¯ í•™ìŠµ ëª©í‘œ](#-í•™ìŠµ-ëª©í‘œ)
- [ğŸ”§ í”„ë¡œì íŠ¸ ê°œìš”](#-í”„ë¡œì íŠ¸-ê°œìš”)
- [ğŸ“š React/Next.js ê¸°ì´ˆ ì´ë¡ ](#-reactnextjs-ê¸°ì´ˆ-ì´ë¡ )
- [ğŸ” ì¸ì¦ ì‹œìŠ¤í…œ ì´ë¡ ](#-ì¸ì¦-ì‹œìŠ¤í…œ-ì´ë¡ )
- [ğŸ›  ê¸°ìˆ  ìŠ¤íƒ ìƒì„¸ ë¶„ì„](#-ê¸°ìˆ -ìŠ¤íƒ-ìƒì„¸-ë¶„ì„)
- [ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡° ë¶„ì„](#-í”„ë¡œì íŠ¸-êµ¬ì¡°-ë¶„ì„)
- [ğŸ” í•µì‹¬ ì½”ë“œ ë¶„ì„](#-í•µì‹¬-ì½”ë“œ-ë¶„ì„)
- [ğŸš€ ì‹¤í–‰ ê°€ì´ë“œ](#-ì‹¤í–‰-ê°€ì´ë“œ)
- [ğŸ“ í•™ìŠµ ì •ë¦¬](#-í•™ìŠµ-ì •ë¦¬)

---

## ğŸ¯ í•™ìŠµ ëª©í‘œ

ì´ í”„ë¡œì íŠ¸ë¥¼ ì™„ë£Œí•˜ë©´ ë‹¤ìŒì„ ìŠµë“í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

### í•µì‹¬ í•™ìŠµ ëª©í‘œ
- **ì¸ì¦ê³¼ ê¶Œí•œ ê´€ë¦¬**: ì‚¬ìš©ì ì‹ë³„ ë° ì ‘ê·¼ ê¶Œí•œ ì œì–´ ì‹œìŠ¤í…œ ì´í•´
- **ì„¸ì…˜ ì²˜ë¦¬**: ì‚¬ìš©ì ë¡œê·¸ì¸ ìƒíƒœë¥¼ ì•ˆì „í•˜ê²Œ ìœ ì§€í•˜ëŠ” ë°©ë²• í•™ìŠµ
- **ë³´ì•ˆ Best Practices**: ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë³´ì•ˆì˜ í•µì‹¬ ì›ì¹™ ì ìš©

### êµ¬í˜„ ê¸°ìˆ  ìŠµë“
- **NextAuth.js v5 (Auth.js)**: í˜„ëŒ€ì ì¸ ì¸ì¦ ë¼ì´ë¸ŒëŸ¬ë¦¬ í™œìš©
- **OAuth ì œê³µì**: Google, GitHub ë“± ì†Œì…œ ë¡œê·¸ì¸ ì—°ë™
- **JWT vs Session ì „ëµ**: ë‘ ì¸ì¦ ë°©ì‹ì˜ ì°¨ì´ì ê³¼ ì ìš© ë°©ë²•
- **ë¯¸ë“¤ì›¨ì–´**: í˜ì´ì§€ ë³´í˜¸ ë° ì ‘ê·¼ ì œì–´ êµ¬í˜„
- **Role-based ì ‘ê·¼ ì œì–´**: ì‚¬ìš©ì ê¶Œí•œì— ë”°ë¥¸ ê¸°ëŠ¥ ì œí•œ
- **í”„ë¡œí•„ ê´€ë¦¬**: ì‚¬ìš©ì ì •ë³´ ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬ì¶•

---

## ğŸ”§ í”„ë¡œì íŠ¸ ê°œìš”

### ë¬´ì—‡ì„ ë§Œë“¤ê¹Œìš”?
**Social Auth Hub**ëŠ” í˜„ëŒ€ì ì¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í•„ìˆ˜ì¸ ì‚¬ìš©ì ì¸ì¦ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. 
Googleì´ë‚˜ GitHub ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•  ìˆ˜ ìˆê³ , ì‚¬ìš©ìë³„ë¡œ ë‹¤ë¥¸ ê¶Œí•œì„ ë¶€ì—¬í•  ìˆ˜ ìˆëŠ” ì™„ì „í•œ íšŒì› ì‹œìŠ¤í…œì„ êµ¬ì¶•í•©ë‹ˆë‹¤.

### ì£¼ìš” ê¸°ëŠ¥
- ğŸ” **ì†Œì…œ ë¡œê·¸ì¸**: Google, GitHub ê³„ì •ìœ¼ë¡œ ê°„í¸ ë¡œê·¸ì¸
- ğŸ‘¤ **í”„ë¡œí•„ ê´€ë¦¬**: ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ ë° ê´€ë¦¬
- ğŸ›¡ï¸ **ê¶Œí•œ ê´€ë¦¬**: ì¼ë°˜ ì‚¬ìš©ìì™€ ê´€ë¦¬ì êµ¬ë¶„
- ğŸ“Š **ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ**: ì „ì²´ ì‚¬ìš©ì ê´€ë¦¬ ë° í†µê³„
- ğŸšª **í˜ì´ì§€ ë³´í˜¸**: ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë§Œ ì ‘ê·¼ ê°€ëŠ¥í•œ í˜ì´ì§€

---

## ğŸ“š React/Next.js ê¸°ì´ˆ ì´ë¡ 

Reactë¥¼ ì²˜ìŒ ì ‘í•˜ëŠ” ë¶„ë“¤ì„ ìœ„í•´ í•µì‹¬ ê°œë…ë¶€í„° ì°¨ê·¼ì°¨ê·¼ ì„¤ëª…í•©ë‹ˆë‹¤.

### 1. Reactë€ ë¬´ì—‡ì¸ê°€?

**React**ëŠ” Facebook(Meta)ì—ì„œ ê°œë°œí•œ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤(UI)ë¥¼ ë§Œë“¤ê¸° ìœ„í•œ JavaScript ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.

#### ğŸ”‘ Reactì˜ í•µì‹¬ ê°œë…

**1) ì»´í¬ë„ŒíŠ¸ (Component)**
- UIë¥¼ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë…ë¦½ì ì¸ ì¡°ê°ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ê°œë…
- ë§ˆì¹˜ ë ˆê³  ë¸”ë¡ì²˜ëŸ¼ ì¡°í•©í•˜ì—¬ ë³µì¡í•œ UIë¥¼ êµ¬ì„±

```tsx
// src/components/Header.tsx - í—¤ë” ì»´í¬ë„ŒíŠ¸ ì˜ˆì‹œ
export function Header() {
  return (
    <AppBar position="static">
      <Toolbar>
        <Typography variant="h6">
          ğŸ” Social Auth Hub
        </Typography>
      </Toolbar>
    </AppBar>
  );
}
```

**2) JSX (JavaScript XML)**
- JavaScript ì½”ë“œ ì•ˆì—ì„œ HTMLê³¼ ìœ ì‚¬í•œ ë¬¸ë²•ì„ ì‚¬ìš©
- ë” ì§ê´€ì ì´ê³  ì½ê¸° ì‰¬ìš´ ì½”ë“œ ì‘ì„± ê°€ëŠ¥

```tsx
// JSX ì˜ˆì‹œ: JavaScriptì™€ HTMLì´ í•¨ê»˜
const greeting = <h1>ì•ˆë…•í•˜ì„¸ìš”, {user?.name}ë‹˜!</h1>;
```

**3) Props (ì†ì„±)**
- ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìì‹ ì»´í¬ë„ŒíŠ¸ë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ëŠ” ë°©ë²•

```tsx
// src/components/Providers.tsx - Props í™œìš© ì˜ˆì‹œ
interface ProvidersProps {
  children: React.ReactNode;  // ìì‹ ì»´í¬ë„ŒíŠ¸ë“¤
  session?: Session | null;   // ì„¸ì…˜ ì •ë³´
}

export function Providers({ children, session }: ProvidersProps) {
  return (
    <SessionProvider session={session}>
      {children}
    </SessionProvider>
  );
}
```

**4) State (ìƒíƒœ)**
- ì»´í¬ë„ŒíŠ¸ê°€ ê¸°ì–µí•´ì•¼ í•˜ëŠ” ë™ì ì¸ ë°ì´í„°
- ìƒíƒœê°€ ë³€í•˜ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ìë™ìœ¼ë¡œ ë‹¤ì‹œ ë Œë”ë§ë¨

```tsx
// src/components/Header.tsx - useState í›… ì‚¬ìš© ì˜ˆì‹œ
export function Header() {
  // anchorEl: í˜„ì¬ ìƒíƒœ ê°’
  // setAnchorEl: ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” í•¨ìˆ˜
  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);

  const handleMenuOpen = (event: React.MouseEvent<HTMLElement>) => {
    setAnchorEl(event.currentTarget); // ìƒíƒœ ë³€ê²½
  };

  return (
    // ìƒíƒœì— ë”°ë¼ ë©”ë‰´ê°€ ì—´ë¦¬ê³  ë‹«í˜
    <Menu
      anchorEl={anchorEl}
      open={Boolean(anchorEl)}
      onClose={() => setAnchorEl(null)}
    >
      {/* ë©”ë‰´ ë‚´ìš© */}
    </Menu>
  );
}
```

### 2. Next.jsë€ ë¬´ì—‡ì¸ê°€?

**Next.js**ëŠ” React ê¸°ë°˜ì˜ í’€ìŠ¤íƒ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.
Reactë§Œìœ¼ë¡œëŠ” ë³µì¡í•œ ì›¹ì‚¬ì´íŠ¸ë¥¼ ë§Œë“¤ê¸° ì–´ë ¤ìš´ë°, Next.jsê°€ ì´ë¥¼ ì‰½ê²Œ í•´ì¤ë‹ˆë‹¤.

#### ğŸ”‘ Next.jsì˜ í•µì‹¬ ê¸°ëŠ¥

**1) App Router**
- íŒŒì¼ ì‹œìŠ¤í…œ ê¸°ë°˜ ë¼ìš°íŒ…: í´ë” êµ¬ì¡°ê°€ URL êµ¬ì¡°ê°€ ë¨

```
src/app/
â”œâ”€â”€ page.tsx              â†’ http://localhost:3000/
â”œâ”€â”€ auth/signin/page.tsx  â†’ http://localhost:3000/auth/signin
â”œâ”€â”€ profile/page.tsx      â†’ http://localhost:3000/profile
â””â”€â”€ admin/page.tsx        â†’ http://localhost:3000/admin
```

**2) Server Components vs Client Components**

**Server Components (ì„œë²„ ì»´í¬ë„ŒíŠ¸)**
- ì„œë²„ì—ì„œ ì‹¤í–‰ë˜ì–´ HTMLë¡œ ë³€í™˜ë˜ì–´ ë¸Œë¼ìš°ì €ì— ì „ë‹¬
- ë°ì´í„°ë² ì´ìŠ¤ ì¡°íšŒ, íŒŒì¼ ì½ê¸° ë“± ì„œë²„ ì‘ì—… ê°€ëŠ¥
- ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ëŠ” Server Component

```tsx
// src/app/page.tsx - Server Component ì˜ˆì‹œ
export default async function HomePage() {
  // ì„œë²„ì—ì„œ ì„¸ì…˜ ì •ë³´ ì¡°íšŒ
  const session = await auth();
  
  return (
    <Container>
      {session ? (
        <Typography>ì•ˆë…•í•˜ì„¸ìš”, {session.user?.name}ë‹˜!</Typography>
      ) : (
        <Typography>ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤</Typography>
      )}
    </Container>
  );
}
```

**Client Components (í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸)**
- ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì»´í¬ë„ŒíŠ¸
- ì‚¬ìš©ì ìƒí˜¸ì‘ìš©(í´ë¦­, ì…ë ¥ ë“±) ì²˜ë¦¬ ê°€ëŠ¥
- `"use client"` ì§€ì‹œì–´ë¡œ ëª…ì‹œ

```tsx
// src/components/Header.tsx - Client Component ì˜ˆì‹œ
"use client"; // í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì„ì„ ëª…ì‹œ

export function Header() {
  // ë¸Œë¼ìš°ì €ì—ì„œ ì„¸ì…˜ ìƒíƒœ í™•ì¸
  const { data: session, status } = useSession();
  
  // ì‚¬ìš©ì í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬
  const handleMenuOpen = (event: React.MouseEvent<HTMLElement>) => {
    // í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬ ë¡œì§
  };

  return (
    <Button onClick={handleMenuOpen}>
      ë©”ë‰´ ì—´ê¸°
    </Button>
  );
}
```

**3) Server Actions**
- ì„œë²„ì—ì„œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜ë¥¼ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì§ì ‘ í˜¸ì¶œ ê°€ëŠ¥
- í¼ ì œì¶œ, ë°ì´í„° ë³€ê²½ ë“±ì— í™œìš©

```tsx
// src/app/auth/signin/page.tsx - Server Action ì˜ˆì‹œ
export default function SignInPage() {
  return (
    <form
      action={async () => {
        "use server"; // ì„œë²„ì—ì„œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜ì„ì„ ëª…ì‹œ
        await signIn("google", { redirectTo: "/" });
      }}
    >
      <Button type="submit">Googleë¡œ ë¡œê·¸ì¸</Button>
    </form>
  );
}
```

### 3. TypeScript ê¸°ì´ˆ

**TypeScript**ëŠ” JavaScriptì— íƒ€ì…ì„ ì¶”ê°€í•œ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì…ë‹ˆë‹¤.
ì½”ë“œë¥¼ ë” ì•ˆì „í•˜ê³  ì˜ˆì¸¡ ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.

#### ğŸ”‘ TypeScript í•µì‹¬ ê°œë…

**1) íƒ€ì… ì •ì˜**
```tsx
// src/types/auth.ts - íƒ€ì… ì •ì˜ ì˜ˆì‹œ

// ì¸í„°í˜ì´ìŠ¤: ê°ì²´ì˜ êµ¬ì¡°ë¥¼ ì •ì˜
interface ProvidersProps {
  children: React.ReactNode;    // React ì»´í¬ë„ŒíŠ¸ íƒ€ì…
  session?: Session | null;     // ì„ íƒì (?) ì†ì„±, nullë„ ê°€ëŠ¥
}

// íƒ€ì… ë³„ì¹­: ë³µì¡í•œ íƒ€ì…ì„ ê°„ë‹¨í•œ ì´ë¦„ìœ¼ë¡œ ì •ì˜
export interface AppUser {
  id: string;                   // ë¬¸ìì—´ íƒ€ì…
  name?: string | null;         // ì„ íƒì , ë¬¸ìì—´ ë˜ëŠ” null
  email: string;                // í•„ìˆ˜ ë¬¸ìì—´
  role: string;                 // ë¬¸ìì—´ íƒ€ì…
  createdAt: Date;             // Date ê°ì²´ íƒ€ì…
}
```

**2) ì œë„¤ë¦­ íƒ€ì…**
```tsx
// ë‹¤ì–‘í•œ íƒ€ì…ì—ì„œ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸
interface CardProps<T> {
  data: T;                     // TëŠ” ì‚¬ìš©í•  ë•Œ ê²°ì •ë¨
  onSelect: (item: T) => void; // T íƒ€ì…ì„ ë°›ëŠ” í•¨ìˆ˜
}
```

---

## ğŸ” ì¸ì¦ ì‹œìŠ¤í…œ ì´ë¡ 

ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ "ëˆ„ê°€ ì ‘ì†í–ˆëŠ”ì§€ ì•Œê³ , ê·¸ ì‚¬ëŒì´ ë¬´ì—‡ì„ í•  ìˆ˜ ìˆëŠ”ì§€ ê²°ì •í•˜ëŠ”" ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

### 1. ì¸ì¦ vs ì¸ê°€

#### ğŸ” ì¸ì¦ (Authentication)
**"ë‹¹ì‹ ì´ ëˆ„êµ¬ì¸ì§€ í™•ì¸í•˜ëŠ” ê³¼ì •"**

```tsx
// ë¡œê·¸ì¸ ê³¼ì • = ì¸ì¦
const session = await auth(); // í˜„ì¬ ì‚¬ìš©ìê°€ ëˆ„êµ¬ì¸ì§€ í™•ì¸

if (session) {
  console.log(`${session.user.name}ë‹˜ì´ ë¡œê·¸ì¸í–ˆìŠµë‹ˆë‹¤`);
} else {
  console.log("ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ì‚¬ìš©ìì…ë‹ˆë‹¤");
}
```

#### ğŸ›¡ï¸ ì¸ê°€ (Authorization)
**"ë‹¹ì‹ ì´ ë¬´ì—‡ì„ í•  ìˆ˜ ìˆëŠ”ì§€ ê²°ì •í•˜ëŠ” ê³¼ì •"**

```tsx
// src/app/admin/page.tsx - ê¶Œí•œ ì²´í¬ = ì¸ê°€
export default async function AdminPage() {
  const session = await auth();
  
  // ê´€ë¦¬ì ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸
  if (!session || session.user?.role !== 'ADMIN') {
    redirect('/'); // ê¶Œí•œì´ ì—†ìœ¼ë©´ í™ˆìœ¼ë¡œ ë¦¬ë””ë ‰ì…˜
  }
  
  // ê´€ë¦¬ìë§Œ ë³¼ ìˆ˜ ìˆëŠ” ë‚´ìš©
  return <AdminDashboard />;
}
```

### 2. OAuthë€?

**OAuth**ëŠ” "ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì˜ ê³„ì •ì„ ì´ìš©í•´ ë¡œê·¸ì¸í•˜ëŠ” í‘œì¤€ ë°©ì‹"ì…ë‹ˆë‹¤.

#### ğŸ”„ OAuth íë¦„ (Google ë¡œê·¸ì¸ ì˜ˆì‹œ)

```mermaid
sequenceDiagram
    participant User as ì‚¬ìš©ì
    participant App as ìš°ë¦¬ ì•±
    participant Google as Google
    
    User->>App: "Googleë¡œ ë¡œê·¸ì¸" í´ë¦­
    App->>Google: ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜
    User->>Google: Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸
    Google->>App: ì¸ì¦ ì½”ë“œ ì „ë‹¬
    App->>Google: ì¸ì¦ ì½”ë“œë¡œ í† í° ìš”ì²­
    Google->>App: ì•¡ì„¸ìŠ¤ í† í° + ì‚¬ìš©ì ì •ë³´
    App->>User: ë¡œê·¸ì¸ ì™„ë£Œ, ì„¸ì…˜ ìƒì„±
```

```tsx
// src/lib/auth.ts - OAuth ì„¤ì • ì˜ˆì‹œ
export const { handlers, signIn, signOut, auth } = NextAuth({
  providers: [
    Google({
      clientId: process.env.GOOGLE_CLIENT_ID!,     // Googleì—ì„œ ë°œê¸‰ë°›ì€ ID
      clientSecret: process.env.GOOGLE_CLIENT_SECRET!, // Googleì—ì„œ ë°œê¸‰ë°›ì€ ë¹„ë°€í‚¤
    }),
    GitHub({
      clientId: process.env.GITHUB_CLIENT_ID!,
      clientSecret: process.env.GITHUB_CLIENT_SECRET!,
    }),
  ],
});
```

### 3. ì„¸ì…˜ vs JWT

ì‚¬ìš©ì ë¡œê·¸ì¸ ìƒíƒœë¥¼ ìœ ì§€í•˜ëŠ” ë‘ ê°€ì§€ ì£¼ìš” ë°©ì‹ì…ë‹ˆë‹¤.

#### ğŸª ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦ (ìš°ë¦¬ í”„ë¡œì íŠ¸ ë°©ì‹)

**íŠ¹ì§•:**
- ì„œë²„ì— ì‚¬ìš©ì ì •ë³´ ì €ì¥
- ë¸Œë¼ìš°ì €ì—ëŠ” ì„¸ì…˜ IDë§Œ ì €ì¥
- ë” ì•ˆì „í•˜ì§€ë§Œ ì„œë²„ ë©”ëª¨ë¦¬ ì‚¬ìš©

```tsx
// src/lib/auth.ts - ì„¸ì…˜ ê¸°ë°˜ ì„¤ì •
export const { handlers, signIn, signOut, auth } = NextAuth({
  session: {
    strategy: "database", // ë°ì´í„°ë² ì´ìŠ¤ì— ì„¸ì…˜ ì €ì¥
    maxAge: 30 * 24 * 60 * 60, // 30ì¼ ìœ ì§€
  },
  
  callbacks: {
    async session({ session, user }) {
      // ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ìµœì‹  ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ
      const dbUser = await prisma.user.findUnique({
        where: { id: user.id }
      });
      
      session.user.role = dbUser?.role || "USER";
      return session;
    },
  },
});
```

#### ğŸŸï¸ JWT (JSON Web Token)

**íŠ¹ì§•:**
- í† í° ìì²´ì— ì‚¬ìš©ì ì •ë³´ í¬í•¨
- ì„œë²„ ë©”ëª¨ë¦¬ ì‚¬ìš© ì—†ìŒ
- í† í° í¬ê¸°ê°€ í¬ê³ , í•œë²ˆ ë°œê¸‰ë˜ë©´ ìˆ˜ì • ì–´ë ¤ì›€

```javascript
// JWT í† í° ì˜ˆì‹œ (ì‹¤ì œë¡œëŠ” ì•”í˜¸í™”ë¨)
{
  "sub": "user123",
  "name": "í™ê¸¸ë™",
  "role": "USER",
  "exp": 1640995200
}
```

### 4. ë¯¸ë“¤ì›¨ì–´ë¥¼ í™œìš©í•œ ë³´í˜¸

**ë¯¸ë“¤ì›¨ì–´**ëŠ” ëª¨ë“  í˜ì´ì§€ ìš”ì²­ì„ ê°€ë¡œì±„ì„œ ì‚¬ì „ì— ì²˜ë¦¬í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.

```tsx
// src/middleware.ts - í˜ì´ì§€ ë³´í˜¸ êµ¬í˜„
export default auth((req) => {
  const { pathname } = req.nextUrl;
  const isAuthenticated = !!req.auth;

  // ë³´í˜¸í•  ê²½ë¡œ ì •ì˜
  const protectedPaths = ['/profile', '/admin'];
  const adminPaths = ['/admin'];

  // ê´€ë¦¬ì í˜ì´ì§€ ì ‘ê·¼ ì²´í¬
  if (adminPaths.some(path => pathname.startsWith(path))) {
    if (!isAuthenticated) {
      // ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ê²½ìš° â†’ ë¡œê·¸ì¸ í˜ì´ì§€
      return NextResponse.redirect(new URL('/auth/signin', req.url));
    }
    
    // ê´€ë¦¬ì ê¶Œí•œì´ ì—†ëŠ” ê²½ìš° â†’ í™ˆí˜ì´ì§€
    if (req.auth?.user?.role !== 'ADMIN') {
      return NextResponse.redirect(new URL('/', req.url));
    }
  }

  return NextResponse.next();
});
```

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ ìƒì„¸ ë¶„ì„

### 1. NextAuth.js v5 (Auth.js)

í˜„ëŒ€ì ì¸ ì¸ì¦ ì‹œìŠ¤í…œì˜ ì‚¬ì‹¤ìƒ í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.

#### ğŸ”§ ì£¼ìš” ê¸°ëŠ¥
- **ë‹¤ì–‘í•œ ì¸ì¦ ì œê³µì ì§€ì›**: Google, GitHub, Apple, ì´ë©”ì¼ ë“±
- **ë³´ì•ˆ ìë™ ì²˜ë¦¬**: CSRF, PKCE ë“± ë³´ì•ˆ ì´ìŠˆ ìë™ í•´ê²°
- **TypeScript ì™„ì „ ì§€ì›**: íƒ€ì… ì•ˆì „ì„± ë³´ì¥
- **Next.js ì™„ë²½ í†µí•©**: App Router, Server Actions ì™„ë²½ ì§€ì›

```tsx
// src/lib/auth.ts - NextAuth í•µì‹¬ ì„¤ì •
export const { handlers, signIn, signOut, auth } = NextAuth({
  adapter: PrismaAdapter(prisma), // ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™
  
  providers: [
    Google({
      clientId: process.env.GOOGLE_CLIENT_ID!,
      clientSecret: process.env.GOOGLE_CLIENT_SECRET!,
    }),
  ],
  
  callbacks: {
    // ì„¸ì…˜ì— ì¶”ê°€ ì •ë³´ í¬í•¨
    async session({ session, user }) {
      session.user.id = user.id;
      session.user.role = user.role;
      return session;
    },
  },
});
```

### 2. Prisma ORM

**ORM (Object-Relational Mapping)**ì€ ë°ì´í„°ë² ì´ìŠ¤ì™€ ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ ê°„ì˜ ë‹¤ë¦¬ ì—­í• ì„ í•˜ëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤.

#### ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì •ì˜

```prisma
// prisma/schema.prisma - ì‚¬ìš©ì í…Œì´ë¸” ì •ì˜
model User {
  id            String    @id @default(cuid()) // ê³ ìœ  ID (ìë™ ìƒì„±)
  name          String?   // ì´ë¦„ (ì„ íƒì‚¬í•­)
  email         String    @unique // ì´ë©”ì¼ (ì¤‘ë³µ ë¶ˆê°€)
  image         String?   // í”„ë¡œí•„ ì´ë¯¸ì§€ URL
  role          String    @default("USER") // ê¶Œí•œ (ê¸°ë³¸ê°’: USER)
  createdAt     DateTime  @default(now()) // ìƒì„±ì¼ì‹œ
  updatedAt     DateTime  @updatedAt // ìˆ˜ì •ì¼ì‹œ
  
  accounts Account[] // ì†Œì…œ ê³„ì • ì—°ê²° ì •ë³´
  sessions Session[] // ë¡œê·¸ì¸ ì„¸ì…˜ ì •ë³´

  @@map("users") // ì‹¤ì œ í…Œì´ë¸”ëª…
}
```

#### ğŸ” ë°ì´í„°ë² ì´ìŠ¤ ì¡°íšŒ

```tsx
// src/app/admin/page.tsx - Prismaë¥¼ í™œìš©í•œ ë°ì´í„° ì¡°íšŒ
export default async function AdminPage() {
  // ëª¨ë“  ì‚¬ìš©ì ì¡°íšŒ (ìµœì‹ ìˆœ)
  const users = await prisma.user.findMany({
    orderBy: { createdAt: 'desc' },
    select: {
      id: true,
      name: true,
      email: true,
      role: true,
      createdAt: true,
      // ë¯¼ê°í•œ ì •ë³´ëŠ” ì œì™¸
    }
  });

  // í†µê³„ ê³„ì‚°
  const totalUsers = users.length;
  const adminUsers = users.filter(u => u.role === 'ADMIN').length;

  return <AdminDashboard users={users} stats={{ totalUsers, adminUsers }} />;
}
```

### 3. Material-UI (MUI)

Googleì˜ Material Designì„ Reactì—ì„œ êµ¬í˜„í•œ ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.

#### ğŸ¨ í…Œë§ˆ ì‹œìŠ¤í…œ

```tsx
// src/lib/theme.ts - ì»¤ìŠ¤í…€ í…Œë§ˆ ì •ì˜
export const theme = createTheme({
  palette: {
    primary: {
      main: '#1976d2', // ë©”ì¸ ìƒ‰ìƒ
      light: '#42a5f5',
      dark: '#1565c0',
    },
    secondary: {
      main: '#dc004e', // ë³´ì¡° ìƒ‰ìƒ
    },
  },
  
  // ì»´í¬ë„ŒíŠ¸ë³„ ìŠ¤íƒ€ì¼ ì»¤ìŠ¤í„°ë§ˆì´ì§•
  components: {
    MuiButton: {
      styleOverrides: {
        root: {
          textTransform: 'none', // ëŒ€ë¬¸ì ë³€í™˜ ë¹„í™œì„±í™”
          borderRadius: '8px',   // ëª¨ì„œë¦¬ ë‘¥ê¸€ê¸°
        },
      },
    },
  },
});
```

#### ğŸ§© ì»´í¬ë„ŒíŠ¸ í™œìš©

```tsx
// src/app/page.tsx - Material-UI ì»´í¬ë„ŒíŠ¸ í™œìš© ì˜ˆì‹œ
export default async function HomePage() {
  return (
    <Container maxWidth="md" sx={{ py: 4 }}>
      <Paper elevation={3} sx={{ p: 4 }}>
        <Typography variant="h3" component="h1" gutterBottom>
          ğŸ” Social Auth Hub
        </Typography>
        
        <Button
          variant="contained"
          size="large"
          startIcon={<Login />}
          onClick={handleLogin}
        >
          ë¡œê·¸ì¸ í•˜ê¸°
        </Button>
      </Paper>
    </Container>
  );
}
```

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡° ë¶„ì„

### í´ë”ë³„ ì—­í• ê³¼ ì„¤ê³„ ì›ì¹™

```
src/
â”œâ”€â”€ app/                    # App Router (Next.js 13+)
â”‚   â”œâ”€â”€ api/               # API ì—”ë“œí¬ì¸íŠ¸
â”‚   â”œâ”€â”€ auth/              # ì¸ì¦ ê´€ë ¨ í˜ì´ì§€
â”‚   â”œâ”€â”€ admin/             # ê´€ë¦¬ì ì „ìš© í˜ì´ì§€
â”‚   â”œâ”€â”€ profile/           # ì‚¬ìš©ì í”„ë¡œí•„ í˜ì´ì§€
â”‚   â”œâ”€â”€ layout.tsx         # ì „ì—­ ë ˆì´ì•„ì›ƒ
â”‚   â””â”€â”€ page.tsx           # í™ˆí˜ì´ì§€
â”œâ”€â”€ components/            # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ lib/                   # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ë° ì„¤ì •
â”œâ”€â”€ types/                 # TypeScript íƒ€ì… ì •ì˜
â””â”€â”€ middleware.ts          # Next.js ë¯¸ë“¤ì›¨ì–´
```

#### ğŸ—ï¸ ì•„í‚¤í…ì²˜ ì„¤ê³„ ì›ì¹™

**1) ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬ (Separation of Concerns)**
```tsx
// âŒ ì˜ëª»ëœ ì˜ˆ: ëª¨ë“  ê¸°ëŠ¥ì´ í•œ ê³³ì—
function HomePage() {
  // ì¸ì¦ ë¡œì§
  const [user, setUser] = useState(null);
  
  // UI ë¡œì§
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  
  // ë°ì´í„° fetching ë¡œì§
  const [users, setUsers] = useState([]);
  
  // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
  const calculateStats = () => { /* ... */ };
  
  return <div>{/* ë³µì¡í•œ UI */}</div>;
}

// âœ… ì˜¬ë°”ë¥¸ ì˜ˆ: ì—­í• ë³„ ë¶„ë¦¬
// ì¸ì¦: useSession í›…
// UI: Header ì»´í¬ë„ŒíŠ¸
// ë°ì´í„°: Prisma ì¿¼ë¦¬
// ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§: ë³„ë„ í•¨ìˆ˜
```

**2) ë‹¨ì¼ ì±…ì„ ì›ì¹™ (Single Responsibility Principle)**
```tsx
// src/components/Header.tsx - í—¤ë”ë§Œ ë‹´ë‹¹
export function Header() {
  return <AppBar>í—¤ë” ë‚´ìš©</AppBar>;
}

// src/components/Providers.tsx - í”„ë¡œë°”ì´ë”ë§Œ ë‹´ë‹¹
export function Providers({ children }) {
  return <SessionProvider>{children}</SessionProvider>;
}

// src/components/ThemeRegistry.tsx - í…Œë§ˆë§Œ ë‹´ë‹¹
export function ThemeRegistry({ children }) {
  return <ThemeProvider>{children}</ThemeProvider>;
}
```

### App Router vs Pages Router

**App Router** (Next.js 13+ ê¶Œì¥ ë°©ì‹)ì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ :

#### ğŸ”„ ë¼ìš°íŒ… ë°©ì‹ ë¹„êµ

```
ğŸ“ App Router (í˜„ì¬ í”„ë¡œì íŠ¸)
src/app/
â”œâ”€â”€ page.tsx                    â†’ /
â”œâ”€â”€ auth/signin/page.tsx        â†’ /auth/signin
â”œâ”€â”€ profile/page.tsx            â†’ /profile
â””â”€â”€ admin/page.tsx              â†’ /admin

ğŸ“ Pages Router (êµ¬ë²„ì „)
pages/
â”œâ”€â”€ index.tsx                   â†’ /
â”œâ”€â”€ auth/signin.tsx             â†’ /auth/signin
â”œâ”€â”€ profile.tsx                 â†’ /profile
â””â”€â”€ admin.tsx                   â†’ /admin
```

#### âš¡ App Routerì˜ ì¥ì 

**1) Server Components ê¸°ë³¸ ì§€ì›**
```tsx
// App Routerì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì„œë²„ì—ì„œ ì‹¤í–‰
export default async function ProfilePage() {
  // ì„œë²„ì—ì„œ ì§ì ‘ ë°ì´í„°ë² ì´ìŠ¤ ì¡°íšŒ ê°€ëŠ¥
  const session = await auth();
  const user = await prisma.user.findUnique({
    where: { id: session.user.id }
  });
  
  return <UserProfile user={user} />;
}
```

**2) ë ˆì´ì•„ì›ƒ ê³µìœ **
```tsx
// src/app/layout.tsx - ëª¨ë“  í˜ì´ì§€ì— ì ìš©
export default function RootLayout({ children }) {
  return (
    <html>
      <body>
        <Header />        {/* ëª¨ë“  í˜ì´ì§€ì— ê³µí†µ í—¤ë” */}
        {children}        {/* í˜ì´ì§€ë³„ ë‚´ìš© */}
        <Footer />        {/* ëª¨ë“  í˜ì´ì§€ì— ê³µí†µ í‘¸í„° */}
      </body>
    </html>
  );
}
```

---

## ğŸ” í•µì‹¬ ì½”ë“œ ë¶„ì„

### 1. ì¸ì¦ í”Œë¡œìš° êµ¬í˜„

#### ğŸ”‘ NextAuth ì„¤ì •ì˜ í•µì‹¬

```tsx
// src/lib/auth.ts - ì¸ì¦ ì‹œìŠ¤í…œì˜ ì‹¬ì¥ë¶€
export const { handlers, signIn, signOut, auth } = NextAuth({
  // 1. ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ ì–´ëŒ‘í„°
  adapter: PrismaAdapter(prisma),
  
  // 2. OAuth ì œê³µì ì„¤ì •
  providers: [
    Google({
      clientId: process.env.GOOGLE_CLIENT_ID!,
      clientSecret: process.env.GOOGLE_CLIENT_SECRET!,
    }),
    GitHub({
      clientId: process.env.GITHUB_CLIENT_ID!,
      clientSecret: process.env.GITHUB_CLIENT_SECRET!,
    }),
  ],
  
  // 3. ì„¸ì…˜ ì „ëµ ì„¤ì •
  session: {
    strategy: "database", // ì„¸ì…˜ì„ DBì— ì €ì¥
    maxAge: 30 * 24 * 60 * 60, // 30ì¼ê°„ ìœ ì§€
  },
  
  // 4. ì½œë°± í•¨ìˆ˜ - ì¸ì¦ ê³¼ì •ì—ì„œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜ë“¤
  callbacks: {
    // ì„¸ì…˜ ë°ì´í„° ì»¤ìŠ¤í„°ë§ˆì´ì§•
    async session({ session, user }) {
      if (session?.user) {
        session.user.id = user.id;
        
        // ìµœì‹  ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ (ì—­í•  í¬í•¨)
        const dbUser = await prisma.user.findUnique({
          where: { id: user.id }
        });
        
        session.user.role = dbUser?.role || "USER";
      }
      return session;
    },
  },
});
```

#### ğŸ“ ê° ë¶€ë¶„ì˜ ì—­í•  ì„¤ëª…

**1) Adapter (ì–´ëŒ‘í„°)**
- NextAuthì™€ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì—°ê²°í•˜ëŠ” ë‹¤ë¦¬
- ì‚¬ìš©ì ì •ë³´, ì„¸ì…˜, ê³„ì • ì—°ê²° ì •ë³´ë¥¼ DBì— ì €ì¥/ì¡°íšŒ

**2) Providers (ì œê³µì)**
- ë¡œê·¸ì¸ ë°©ì‹ì„ ì •ì˜ (Google, GitHub ë“±)
- ê° ì œê³µìë³„ë¡œ í´ë¼ì´ì–¸íŠ¸ IDì™€ ì‹œí¬ë¦¿ í•„ìš”

**3) Session Strategy (ì„¸ì…˜ ì „ëµ)**
- `"database"`: ì„¸ì…˜ ì •ë³´ë¥¼ DBì— ì €ì¥ (ë” ì•ˆì „)
- `"jwt"`: ì„¸ì…˜ ì •ë³´ë¥¼ JWT í† í°ì— ì €ì¥ (ì„œë²„ ë¶€ë‹´ ì ìŒ)

**4) Callbacks (ì½œë°±)**
- ì¸ì¦ ê³¼ì •ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì»¤ìŠ¤í…€ í•¨ìˆ˜ë“¤
- ì„¸ì…˜ ë°ì´í„° ê°€ê³µ, ì¶”ê°€ ê²€ì¦ ë“± ìˆ˜í–‰

### 2. ì„œë²„ ì»´í¬ë„ŒíŠ¸ì—ì„œì˜ ì¸ì¦ ì²´í¬

```tsx
// src/app/admin/page.tsx - ì„œë²„ì—ì„œ ê¶Œí•œ ì²´í¬
export default async function AdminPage() {
  // 1. ì„œë²„ì—ì„œ í˜„ì¬ ì„¸ì…˜ í™•ì¸
  const session = await auth();
  
  // 2. ê¶Œí•œ ì²´í¬ ë° ë¦¬ë””ë ‰ì…˜
  if (!session || session.user?.role !== 'ADMIN') {
    redirect('/'); // Next.js í•¨ìˆ˜ë¡œ ì¦‰ì‹œ ë¦¬ë””ë ‰ì…˜
  }
  
  // 3. ê¶Œí•œì´ ìˆëŠ” ê²½ìš°ì—ë§Œ ë°ì´í„° ì¡°íšŒ
  const users = await prisma.user.findMany({
    orderBy: { createdAt: 'desc' }
  });
  
  // 4. JSX ë°˜í™˜ (ì´ ì‹œì ì—ì„œëŠ” ê¶Œí•œì´ í™•ì¸ëœ ìƒíƒœ)
  return (
    <Container>
      <Typography variant="h4">ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</Typography>
      <UserTable users={users} />
    </Container>
  );
}
```

### 3. í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì—ì„œì˜ ì¸ì¦ ì²˜ë¦¬

```tsx
// src/components/Header.tsx - í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‹¤ì‹œê°„ ìƒíƒœ ê´€ë¦¬
"use client";

export function Header() {
  // 1. í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„¸ì…˜ ìƒíƒœ êµ¬ë…
  const { data: session, status } = useSession();
  
  // 2. ë¡œë”© ìƒíƒœ ì²˜ë¦¬
  if (status === "loading") {
    return <CircularProgress />;
  }
  
  // 3. ë¡œê·¸ì¸ ìƒíƒœì— ë”°ë¥¸ UI ë¶„ê¸°
  return (
    <AppBar>
      <Toolbar>
        <Typography variant="h6">Social Auth Hub</Typography>
        
        {session ? (
          // ë¡œê·¸ì¸í•œ ê²½ìš°
          <>
            <Avatar src={session.user?.image} />
            <Button onClick={() => signOut()}>ë¡œê·¸ì•„ì›ƒ</Button>
          </>
        ) : (
          // ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ê²½ìš°
          <Button href="/auth/signin">ë¡œê·¸ì¸</Button>
        )}
      </Toolbar>
    </AppBar>
  );
}
```

### 4. ë¯¸ë“¤ì›¨ì–´ë¥¼ í†µí•œ ì „ì—­ ë³´ì•ˆ

```tsx
// src/middleware.ts - ëª¨ë“  ìš”ì²­ì„ ê°€ë¡œì±„ëŠ” ë³´ì•ˆ ê³„ì¸µ
export default auth((req) => {
  const { pathname } = req.nextUrl;
  const isAuthenticated = !!req.auth;
  const userRole = req.auth?.user?.role;

  // 1. ê²½ë¡œë³„ ì ‘ê·¼ ê·œì¹™ ì •ì˜
  const routes = {
    public: ['/', '/auth/signin'],           // ëˆ„êµ¬ë‚˜ ì ‘ê·¼ ê°€ëŠ¥
    protected: ['/profile'],                 // ë¡œê·¸ì¸ í•„ìš”
    admin: ['/admin']                        // ê´€ë¦¬ìë§Œ ì ‘ê·¼ ê°€ëŠ¥
  };

  // 2. ê´€ë¦¬ì ì „ìš© í˜ì´ì§€ ì²´í¬
  if (routes.admin.some(path => pathname.startsWith(path))) {
    if (!isAuthenticated) {
      return NextResponse.redirect(new URL('/auth/signin', req.url));
    }
    
    if (userRole !== 'ADMIN') {
      return NextResponse.redirect(new URL('/', req.url));
    }
  }

  // 3. ì¼ë°˜ ë³´í˜¸ í˜ì´ì§€ ì²´í¬
  if (routes.protected.some(path => pathname.startsWith(path))) {
    if (!isAuthenticated) {
      return NextResponse.redirect(new URL('/auth/signin', req.url));
    }
  }

  // 4. ë¡œê·¸ì¸í•œ ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ í˜ì´ì§€ ì ‘ê·¼ ì‹œ
  if (pathname === '/auth/signin' && isAuthenticated) {
    return NextResponse.redirect(new URL('/', req.url));
  }

  // 5. ëª¨ë“  ì¡°ê±´ì„ í†µê³¼í•˜ë©´ ìš”ì²­ ê³„ì† ì§„í–‰
  return NextResponse.next();
});
```

### 5. Server Actions í™œìš©

**Server Actions**ëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ í•¨ìˆ˜ë¥¼ ì§ì ‘ í˜¸ì¶œí•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” Next.js 15ì˜ í˜ì‹ ì  ê¸°ëŠ¥ì…ë‹ˆë‹¤.

```tsx
// src/app/auth/signin/page.tsx - Server Actionìœ¼ë¡œ ë¡œê·¸ì¸ ì²˜ë¦¬
export default function SignInPage() {
  return (
    <form
      action={async () => {
        "use server"; // ì´ í•¨ìˆ˜ëŠ” ì„œë²„ì—ì„œ ì‹¤í–‰ë¨ì„ ëª…ì‹œ
        
        // ì„œë²„ì—ì„œ ì‹¤í–‰ë˜ëŠ” ë¡œê·¸ì¸ ë¡œì§
        await signIn("google", { 
          redirectTo: "/" 
        });
      }}
    >
      <Button type="submit">Googleë¡œ ë¡œê·¸ì¸</Button>
    </form>
  );
}
```

#### ğŸ”„ Server Actionsì˜ ì¥ì 

**1) ì „í†µì ì¸ ë°©ì‹ (ë³µì¡í•¨)**
```tsx
// í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸
function LoginForm() {
  const handleSubmit = async (e) => {
    e.preventDefault();
    
    // API í˜¸ì¶œ
    const response = await fetch('/api/login', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ provider: 'google' })
    });
    
    if (response.ok) {
      router.push('/');
    }
  };

  return (
    <form onSubmit={handleSubmit}>
      <button type="submit">ë¡œê·¸ì¸</button>
    </form>
  );
}

// API ë¼ìš°íŠ¸ íŒŒì¼ (pages/api/login.ts)
export default async function handler(req, res) {
  if (req.method === 'POST') {
    // ë¡œê·¸ì¸ ë¡œì§
    await signIn(req.body.provider);
    res.json({ success: true });
  }
}
```

**2) Server Actions ë°©ì‹ (ê°„ë‹¨í•¨)**
```tsx
// ëª¨ë“  ë¡œì§ì´ í•œ ê³³ì—
export default function SignInPage() {
  return (
    <form
      action={async () => {
        "use server";
        await signIn("google", { redirectTo: "/" });
      }}
    >
      <button type="submit">ë¡œê·¸ì¸</button>
    </form>
  );
}
```

---

## ğŸš€ ì‹¤í–‰ ê°€ì´ë“œ

### ë‹¨ê³„ë³„ ì‹¤í–‰ ë°©ë²•

#### 1ë‹¨ê³„: ê°œë°œ í™˜ê²½ ì„¤ì •

```bash
# Node.js 18+ ë²„ì „ í™•ì¸
node --version

# í”„ë¡œì íŠ¸ ìƒì„± ë° ì´ë™
npx create-next-app@latest social-auth-hub
cd social-auth-hub

# ì˜ì¡´ì„± ì„¤ì¹˜
npm install
```

#### 2ë‹¨ê³„: í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

`.env.local` íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ìŒ ë‚´ìš©ì„ ì¶”ê°€:

```env
# NextAuth.js ì„¤ì •
AUTH_SECRET=your-super-secret-key-change-this-to-32-characters-minimum
NEXTAUTH_URL=http://localhost:3000

# ë°ì´í„°ë² ì´ìŠ¤
DATABASE_URL="file:./dev.db"

# Google OAuth (ì„¤ì • ë°©ë²•ì€ ì•„ë˜ ì°¸ì¡°)
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# GitHub OAuth (ì„¤ì • ë°©ë²•ì€ ì•„ë˜ ì°¸ì¡°)
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
```

#### 3ë‹¨ê³„: OAuth ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •

**ğŸ”— Google OAuth ì„¤ì • ìƒì„¸ ê°€ì´ë“œ**

1. [Google Cloud Console](https://console.cloud.google.com/) ì ‘ì†
2. í”„ë¡œì íŠ¸ ì„ íƒ ë˜ëŠ” ìƒˆë¡œ ìƒì„±
3. ì¢Œì¸¡ ë©”ë‰´ì—ì„œ "APIs & Services" > "Credentials" ì„ íƒ
4. "Create Credentials" > "OAuth 2.0 Client ID" í´ë¦­
5. Application type: "Web application" ì„ íƒ
6. Name: "Social Auth Hub" (ë˜ëŠ” ì›í•˜ëŠ” ì´ë¦„)
7. Authorized JavaScript origins:
   ```
   http://localhost:3000
   ```
8. Authorized redirect URIs:
   ```
   http://localhost:3000/api/auth/callback/google
   ```
9. "Create" ë²„íŠ¼ í´ë¦­
10. ìƒì„±ëœ Client IDì™€ Client Secretì„ ë³µì‚¬í•˜ì—¬ `.env.local`ì— ì €ì¥

**ğŸ”— GitHub OAuth ì„¤ì • ìƒì„¸ ê°€ì´ë“œ**

1. [GitHub](https://github.com/) ë¡œê·¸ì¸ í›„ Settings ì´ë™
2. ì¢Œì¸¡ ë©”ë‰´ì—ì„œ "Developer settings" í´ë¦­
3. "OAuth Apps" > "New OAuth App" í´ë¦­
4. ë‹¤ìŒ ì •ë³´ ì…ë ¥:
   - Application name: `Social Auth Hub`
   - Homepage URL: `http://localhost:3000`
   - Application description: `Next.js ì†Œì…œ ì¸ì¦ ì‹œìŠ¤í…œ`
   - Authorization callback URL: `http://localhost:3000/api/auth/callback/github`
5. "Register application" í´ë¦­
6. ìƒì„±ëœ Client ID ë³µì‚¬
7. "Generate a new client secret" í´ë¦­í•˜ì—¬ Client Secret ìƒì„±
8. ë‘ ê°’ì„ `.env.local`ì— ì €ì¥

#### 4ë‹¨ê³„: ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”

```bash
# Prisma ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ (í…Œì´ë¸” ìƒì„±)
npx prisma migrate dev --name init

# Prisma í´ë¼ì´ì–¸íŠ¸ ìƒì„±
npx prisma generate

# (ì„ íƒì‚¬í•­) ë°ì´í„°ë² ì´ìŠ¤ ì‹œê°ì  ê´€ë¦¬ ë„êµ¬
npx prisma studio
```

#### 5ë‹¨ê³„: ê°œë°œ ì„œë²„ ì‹¤í–‰

```bash
# ê°œë°œ ì„œë²„ ì‹œì‘
npm run dev

# ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸
# http://localhost:3000
```

### ì‹¤í–‰ í›„ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

#### ğŸ§ª ê¸°ë³¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

1. **í™ˆí˜ì´ì§€ ì ‘ì†**
   - `http://localhost:3000` ì ‘ì†
   - "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤" ë©”ì‹œì§€ í™•ì¸

2. **ì†Œì…œ ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸**
   - "ë¡œê·¸ì¸ í•˜ê¸°" ë²„íŠ¼ í´ë¦­
   - Google ë˜ëŠ” GitHub ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸
   - í™ˆí˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜ í™•ì¸

3. **í”„ë¡œí•„ í˜ì´ì§€ í…ŒìŠ¤íŠ¸**
   - í—¤ë”ì—ì„œ í”„ë¡œí•„ ì•„ì´ì½˜ í´ë¦­
   - í”„ë¡œí•„ í˜ì´ì§€ ì ‘ì† í™•ì¸
   - ì‚¬ìš©ì ì •ë³´ í‘œì‹œ í™•ì¸

4. **ê¶Œí•œ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸**
   - `/admin` í˜ì´ì§€ ì§ì ‘ ì ‘ì† ì‹œë„
   - ì¼ë°˜ ì‚¬ìš©ìëŠ” í™ˆí˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜ í™•ì¸

5. **ê´€ë¦¬ì ê¶Œí•œ ë¶€ì—¬ ë° í…ŒìŠ¤íŠ¸**
   ```bash
   # Prisma Studio ì‹¤í–‰
   npx prisma studio
   
   # ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:5555 ì ‘ì†
   # User í…Œì´ë¸”ì—ì„œ ë³¸ì¸ ê³„ì •ì˜ roleì„ 'ADMIN'ìœ¼ë¡œ ë³€ê²½
   ```
   - ë¸Œë¼ìš°ì € ìƒˆë¡œê³ ì¹¨ í›„ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ì ‘ê·¼ í™•ì¸

#### ğŸ” ë””ë²„ê¹… íŒ

**ë¬¸ì œ: OAuth ë¡œê·¸ì¸ì´ ì•ˆë  ë•Œ**
```
í•´ê²°ë°©ë²•:
1. .env.local íŒŒì¼ì˜ CLIENT_ID, CLIENT_SECRET í™•ì¸
2. OAuth ì½˜ì†”ì—ì„œ redirect URI ì •í™•íˆ ì…ë ¥í–ˆëŠ”ì§€ í™•ì¸
3. ê°œë°œì ë„êµ¬ Network íƒ­ì—ì„œ ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸
```

**ë¬¸ì œ: ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì˜¤ë¥˜**
```
í•´ê²°ë°©ë²•:
1. npx prisma migrate dev ì¬ì‹¤í–‰
2. DATABASE_URL ê²½ë¡œ í™•ì¸
3. npx prisma generate ì¬ì‹¤í–‰
```

**ë¬¸ì œ: ì„¸ì…˜ì´ ìœ ì§€ë˜ì§€ ì•Šì„ ë•Œ**
```
í•´ê²°ë°©ë²•:
1. AUTH_SECRET ê°’ì´ 32ì ì´ìƒì¸ì§€ í™•ì¸
2. ë¸Œë¼ìš°ì € ìºì‹œ ë° ì¿ í‚¤ ì‚­ì œ
3. ê°œë°œì ë„êµ¬ Application íƒ­ì—ì„œ ì¿ í‚¤ í™•ì¸
```

---

## ğŸ“ í•™ìŠµ ì •ë¦¬

### í•µì‹¬ ê°œë… ì •ë¦¬

#### 1. React/Next.js ì•„í‚¤í…ì²˜ ì´í•´

**ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜**
```tsx
// ì‘ì€ ë‹¨ìœ„ì˜ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ë“¤
<App>
  <ThemeProvider>
    <SessionProvider>
      <Header />
      <MainContent />
      <Footer />
    </SessionProvider>
  </ThemeProvider>
</App>
```

**Server vs Client Components êµ¬ë¶„**
```tsx
// Server Component (ê¸°ë³¸)
async function ServerPage() {
  const data = await fetchData(); // ì„œë²„ì—ì„œ ì‹¤í–‰
  return <div>{data}</div>;
}

// Client Component
"use client";
function ClientComponent() {
  const [state, setState] = useState(); // ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰
  return <button onClick={() => setState()}>í´ë¦­</button>;
}
```

#### 2. í˜„ëŒ€ì ì¸ ì¸ì¦ ì‹œìŠ¤í…œ

**OAuth íë¦„ ì´í•´**
1. ì‚¬ìš©ìê°€ "Googleë¡œ ë¡œê·¸ì¸" í´ë¦­
2. Google ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜
3. Googleì—ì„œ ì¸ì¦ í›„ ìš°ë¦¬ ì•±ìœ¼ë¡œ ì½”ë“œ ì „ë‹¬
4. ì½”ë“œë¥¼ í† í°ìœ¼ë¡œ êµí™˜í•˜ì—¬ ì‚¬ìš©ì ì •ë³´ íšë“
5. ìš°ë¦¬ DBì— ì‚¬ìš©ì ì •ë³´ ì €ì¥ ë° ì„¸ì…˜ ìƒì„±

**ê¶Œí•œ ê¸°ë°˜ ì ‘ê·¼ ì œì–´**
```tsx
// 3ë‹¨ê³„ ë³´ì•ˆ ì²´í¬
1. ë¯¸ë“¤ì›¨ì–´: í˜ì´ì§€ ì ‘ê·¼ ì „ ì‚¬ì „ ê²€ì¦
2. ì„œë²„ ì»´í¬ë„ŒíŠ¸: í˜ì´ì§€ ë¡œë”© ì‹œ ê¶Œí•œ ê²€ì¦  
3. í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸: UI ìƒíƒœì— ë”°ë¥¸ ë™ì  ì œì–´
```

#### 3. íƒ€ì… ì•ˆì „í•œ ê°œë°œ

**TypeScriptì˜ ì´ì **
```tsx
// ì»´íŒŒì¼ ì‹œì ì— ì—ëŸ¬ ë°œê²¬
interface User {
  id: string;
  name: string;
  role: 'USER' | 'ADMIN'; // ì •í™•í•œ ê°’ë§Œ í—ˆìš©
}

function getUser(): User {
  return {
    id: "123",
    name: "í™ê¸¸ë™",
    role: "SUPER_ADMIN" // âŒ TypeScript ì—ëŸ¬!
  };
}
```

### ì‹¤ë¬´ ì ìš© í¬ì¸íŠ¸

#### ğŸ” ë³´ì•ˆ Best Practices

1. **í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬**
   ```bash
   # âœ… ì˜¬ë°”ë¥¸ ë°©ë²•
   AUTH_SECRET=ê°•ë ¥í•œ32ìì´ìƒì˜ëœë¤ë¬¸ìì—´
   
   # âŒ ì˜ëª»ëœ ë°©ë²•  
   AUTH_SECRET=123456
   ```

2. **HTTPS ì‚¬ìš©** (í”„ë¡œë•ì…˜)
   ```env
   NEXTAUTH_URL=https://your-domain.com
   ```

3. **CSRF ë³´í˜¸** (NextAuthì—ì„œ ìë™ ì²˜ë¦¬)

4. **Rate Limiting** (í–¥í›„ êµ¬í˜„ ì˜ˆì •)

#### ğŸ¯ ì„±ëŠ¥ ìµœì í™”

1. **Server Components í™œìš©**
   ```tsx
   // ì„œë²„ì—ì„œ ë¯¸ë¦¬ ë°ì´í„° ë¡œë”©
   async function UserPage() {
     const users = await prisma.user.findMany(); // ì„œë²„ì—ì„œ ì‹¤í–‰
     return <UserList users={users} />; // HTMLë¡œ ì „ì†¡
   }
   ```

2. **Static Generation í™œìš©**
   ```tsx
   // ë¹Œë“œ ì‹œì ì— í˜ì´ì§€ ìƒì„±
   export async function generateStaticParams() {
     return [{ id: '1' }, { id: '2' }];
   }
   ```

### ë‹¤ìŒ ë‹¨ê³„ í•™ìŠµ ë°©í–¥

#### ğŸš€ ì¤‘ê¸‰ ê¸°ëŠ¥ êµ¬í˜„

1. **ì´ë©”ì¼ ì¸ì¦ ì¶”ê°€**
   ```tsx
   // ì´ë©”ì¼ ì œê³µì ì¶”ê°€
   Email({
     server: process.env.EMAIL_SERVER,
     from: process.env.EMAIL_FROM
   })
   ```

2. **ë‹¤ì¤‘ ê³„ì • ì—°ê²°**
   ```tsx
   // í•œ ì‚¬ìš©ìê°€ Google + GitHub ë™ì‹œ ì—°ê²°
   const accounts = await prisma.account.findMany({
     where: { userId: session.user.id }
   });
   ```

3. **ì‹¤ì‹œê°„ ì•Œë¦¼ ì‹œìŠ¤í…œ**
   ```tsx
   // WebSocket ë˜ëŠ” Server-Sent Events í™œìš©
   useEffect(() => {
     const eventSource = new EventSource('/api/notifications');
     eventSource.onmessage = (event) => {
       // ì‹¤ì‹œê°„ ì•Œë¦¼ ì²˜ë¦¬
     };
   }, []);
   ```

#### ğŸ“Š ê³ ê¸‰ ê¸°ëŠ¥ í™•ì¥

1. **ì‚¬ìš©ì í™œë™ ë¡œê·¸**
   ```prisma
   model ActivityLog {
     id        String   @id @default(cuid())
     userId    String
     action    String   // "LOGIN", "LOGOUT", "VIEW_PAGE"
     metadata  Json?    // ì¶”ê°€ ì •ë³´
     createdAt DateTime @default(now())
     
     user User @relation(fields: [userId], references: [id])
   }
   ```

2. **2ë‹¨ê³„ ì¸ì¦ (2FA)**
   ```tsx
   // TOTP (Time-based One-Time Password) êµ¬í˜„
   import { authenticator } from 'otplib';
   
   const secret = authenticator.generateSecret();
   const token = authenticator.generate(secret);
   ```

3. **ì†Œì…œ í”„ë¡œí•„ ë™ê¸°í™”**
   ```tsx
   // ì£¼ê¸°ì ìœ¼ë¡œ ì†Œì…œ í”„ë¡œí•„ ì •ë³´ ì—…ë°ì´íŠ¸
   const refreshProfile = async () => {
     const freshProfile = await fetchGoogleProfile(accessToken);
     await prisma.user.update({
       where: { id: userId },
       data: { name: freshProfile.name, image: freshProfile.picture }
     });
   };
   ```

### ğŸ’¡ ì‹¤ë¬´ ê°œë°œ íŒ

#### 1. ì½”ë“œ í’ˆì§ˆ ê´€ë¦¬

```tsx
// ESLint ê·œì¹™ ì ì§„ì  ì ìš©
{
  "rules": {
    "@typescript-eslint/no-unused-vars": "warn", // ì²˜ìŒì—” ê²½ê³ 
    "@typescript-eslint/no-unused-vars": "error" // ë‚˜ì¤‘ì— ì—ëŸ¬ë¡œ ë³€ê²½
  }
}
```

#### 2. í…ŒìŠ¤íŠ¸ ì „ëµ

```tsx
// ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ
describe('Auth Helper', () => {
  test('should return user role', () => {
    const user = { role: 'ADMIN' };
    expect(getUserRole(user)).toBe('ADMIN');
  });
});

// í†µí•© í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ  
describe('Login Flow', () => {
  test('should redirect after Google login', async () => {
    // ë¡œê·¸ì¸ í”Œë¡œìš° ì „ì²´ í…ŒìŠ¤íŠ¸
  });
});
```

#### 3. ë°°í¬ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸

```bash
# âœ… í”„ë¡œë•ì…˜ ì¤€ë¹„ ì²´í¬ë¦¬ìŠ¤íŠ¸
1. í™˜ê²½ ë³€ìˆ˜ production ê°’ìœ¼ë¡œ ë³€ê²½
2. OAuth redirect URL production ë„ë©”ì¸ìœ¼ë¡œ ë³€ê²½  
3. AUTH_SECRET ê°•ë ¥í•œ ê°’ìœ¼ë¡œ ë³€ê²½
4. ë°ì´í„°ë² ì´ìŠ¤ PostgreSQL ë“±ìœ¼ë¡œ ë³€ê²½
5. HTTPS ì ìš©
6. ì—ëŸ¬ ëª¨ë‹ˆí„°ë§ ë„êµ¬ ì„¤ì • (Sentry ë“±)
```

---

## ğŸ† í”„ë¡œì íŠ¸ ì™„ë£Œ í›„ ì„±ì·¨

ì´ í”„ë¡œì íŠ¸ë¥¼ ì™„ë£Œí•˜ì‹  ê²ƒì„ ì¶•í•˜í•©ë‹ˆë‹¤! ğŸ‰

### âœ… ìŠµë“í•œ í•µì‹¬ ê¸°ìˆ 

1. **React 19 + Next.js 15 ë§ˆìŠ¤í„°**
   - Server Componentsì™€ Client Components êµ¬ë¶„
   - App Router ê¸°ë°˜ ë¼ìš°íŒ… ì‹œìŠ¤í…œ
   - Server Actionsë¥¼ í™œìš©í•œ í¼ ì²˜ë¦¬

2. **í˜„ëŒ€ì ì¸ ì¸ì¦ ì‹œìŠ¤í…œ êµ¬ì¶•**
   - OAuth 2.0 í”„ë¡œí† ì½œ ì´í•´ ë° êµ¬í˜„
   - ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦ vs JWT ì°¨ì´ì  í•™ìŠµ
   - ë³´ì•ˆ Best Practices ì ìš©

3. **TypeScript í™œìš© ê°œë°œ**
   - íƒ€ì… ì•ˆì „í•œ API ì„¤ê³„
   - ì¸í„°í˜ì´ìŠ¤ì™€ ì œë„¤ë¦­ í™œìš©
   - ì»´íŒŒì¼ íƒ€ì„ ì—ëŸ¬ ë°©ì§€

4. **ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™**
   - Prisma ORM í™œìš©í•œ íƒ€ì… ì•ˆì „ ì¿¼ë¦¬
   - ê´€ê³„í˜• ë°ì´í„° ëª¨ë¸ë§
   - ë§ˆì´ê·¸ë ˆì´ì…˜ ê´€ë¦¬

5. **UI/UX ì„¤ê³„**
   - Material-UI ì»´í¬ë„ŒíŠ¸ ì‹œìŠ¤í…œ í™œìš©
   - ë°˜ì‘í˜• ë””ìì¸ êµ¬í˜„
   - ì‚¬ìš©ì ì¹œí™”ì  ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„

### ğŸ¯ ë‹¤ìŒ í”„ë¡œì íŠ¸ ì¤€ë¹„

**Project 08 ì˜ˆê³ **: ì‹¤ì‹œê°„ ì±„íŒ… ì‹œìŠ¤í…œ
- WebSocket í†µì‹ 
- ì‹¤ì‹œê°„ ë©”ì‹œì§•
- ì±„íŒ…ë°© ê´€ë¦¬
- íŒŒì¼ ì—…ë¡œë“œ

ì´ í”„ë¡œì íŠ¸ì—ì„œ í•™ìŠµí•œ ì¸ì¦ ì‹œìŠ¤í…œì´ ë‹¤ìŒ í”„ë¡œì íŠ¸ì˜ ê¸°ë°˜ì´ ë©ë‹ˆë‹¤!

---

**ğŸ“ í•™ìŠµì„ ë§ˆì¹˜ë©°...**

ë³µì¡í•´ ë³´ì˜€ë˜ ì†Œì…œ ë¡œê·¸ì¸ ì‹œìŠ¤í…œì„ ì§ì ‘ êµ¬ì¶•í•´ë³´ì…¨ìŠµë‹ˆë‹¤. 
ì´ì œ ì—¬ëŸ¬ë¶„ì€ í˜„ëŒ€ì ì¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í•µì‹¬ ê¸°ëŠ¥ì¸ ì‚¬ìš©ì ì¸ì¦ì„ ì™„ì „íˆ ì´í•´í•˜ê³  êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê³„ì†í•´ì„œ ë” ê³ ê¸‰ ê¸°ëŠ¥ë“¤ì„ ì¶”ê°€í•´ë³´ì‹œê³ , ë‹¤ìŒ í”„ë¡œì íŠ¸ì—ì„œ ë” í¥ë¯¸ë¡œìš´ ê¸°ìˆ ë“¤ì„ í•¨ê»˜ í•™ìŠµí•´ë‚˜ê°€ê² ìŠµë‹ˆë‹¤!

**Happy Coding! ğŸš€**